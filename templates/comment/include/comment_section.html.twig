<div class="row">
    <span>{{comments.count()}} comments </span> {# FIXME: comments/comment #}
</div>

{% if can_comment %}
    <div class="row">
        {{ form_start(new_comment_form) }}
        {{ form_row(new_comment_form.content) }}
        <button class="red accent-2 btn waves-effect waves-light" type="submit" name="action">
            add comment
        </button>
        {{ form_end(new_comment_form) }}
    </div>
{% else %}
    <div class="row">
        <span>Please login to join the discussion.</span>
    </div>
{% endif %}

    {% for comment in comments %}
        <div class="text-flow">
            {{comment.content| nl2br}}
        </div><br />
        <span>By : <a href="{{ path('profile', { 'id': comment.author.id }) }}">{{comment.author}}</a></span>
        <div class="row">

            {% if delete_comment_forms[comment.id] is defined %}
                {{ form_start(delete_comment_forms[comment.id].createView()) }}
                <button class="col s2 red accent-2 offset-s1 btn waves-effect waves-light" type="submit" name="action">
                    Delete
                </button>
                {{ form_end(delete_comment_forms[comment.id].createView()) }}
            {% endif %}
        </div>
        <div class="divider"></div><br />
    {% endfor %}